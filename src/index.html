<!doctype html>
<html lang="en">
<head>
		<meta charset="UTF-8">
		<meta name="viewport"
					content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Climate By Station</title>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.5.1/plotly-basic.min.js" integrity="sha512-UKHNc6UAUh7ZjzSmyiNKZEdG9QICEZnjF+OEdqIGPi1NsKdhulHlsAcl2fu9+4ughCqpTMewKIIUuUvVsjdOvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<!--		<script src="../dist/threshold_view.js"></script>-->
		<script src="../dist/climate_by_station_widget.js"></script>

</head>
<body>

	<div>
			<div>
					<label for="station">Station Id:</label>
					<input name="station" id="station" value="USC00094429">
			</div>
			<div>
					<label for="variables">Variables:</label>

					<select name="variables" id="variables">
							<option value="pcpn">Precipitation</option>
							<option value="maxt">TMax</option>
							<option value="mint">TMin</option>
							<option value="avgt">TAvg</option>
					</select>
			</div>
			<div>
					<label for="window">Window:</label>
					<input type="number" name="window" id="window" value="1">
			</div>
			<div>
					<label for="threshold">Threshold:</label>
					<input type="number" step="0.25" name="threshold" id="threshold" value="1">
			</div>
			<div>
					<button id="update">Update</button>
			</div>
	</div>

	<div id="threshold-graph"></div>

		<script type="module">

				let element = document.getElementById("threshold-graph");

				const widget = new ClimateByStationWidget(element, {});

				window.widget = widget;

				let windowElement = document.getElementById("window");
				let thresholdElement = document.getElementById("threshold");
				let variableElement = document.getElementById("variables");

				windowElement.addEventListener('change', function(e) {
						let value = e.target.value;

						if(value < 1) {
								value = 1;
						}

						windowElement.value = value;
					  widget.update({window: Number.parseInt(value)})
				})

				thresholdElement.addEventListener('change', function(e) {
						let value = e.target.value;

						if(value < 0.0) {
								value = 0.0;
						}

						thresholdElement.value = value;
						widget.update({threshold: Number.parseFloat(value)})
				})

				variableElement.addEventListener('change', function(e) {
						let value = e.target.value;

						widget.update({variable: value})
				})
		</script>
</body>
</html>
